import{P as w,N as x,S as p,M as y}from"./vendor2.js";class E{constructor(e){this.element=e,this.elementSection=e.closest("section"),this.navigation={prev:this.elementSection.querySelector(".js-slider-default-navigation-prev"),next:this.elementSection.querySelector(".js-slider-default-navigation-next")},this.paginationBullet=this.elementSection.querySelector(".js-slider-default-pagination-bullet"),this.paginationIndex=this.elementSection.querySelector(".js-slider-default-pagination-index"),this.parametersSwiper={slidesPerView:"auto",modules:[]},this.parametersSwiperExtra=this.element.getAttribute("data-parameter"),this.parametersSwiperExtra&&(this.parametersSwiper={...this.parametersSwiper,...JSON.parse(this.parametersSwiperExtra)}),window.innerWidth<581&&(this.parametersSwiper.loop=!1,this.parametersSwiper.centeredSlides=!1),this.init()}setPaginationBullet(){this.parametersSwiper.modules.push(w),this.parametersSwiper.pagination={el:this.paginationBullet,bulletClass:"slider-pagination__bullet-item",bulletActiveClass:"slider-pagination__bullet-item_active"}}setNavigation(){this.parametersSwiper.modules.push(x),this.parametersSwiper.navigation={prevEl:this.navigation.prev,nextEl:this.navigation.next}}getPaginationIndex(e){const t=this.parametersSwiper.loop?e.realIndex+1:e.snapIndex+1,i=e.pagination.bullets.length;return`${(t<10?"0":"")+t} / ${(e.pagination.bullets.length<10?"0":"")+i}`}setPaginationIndex(e){this.paginationIndex.innerText=this.getPaginationIndex(e),e.on("beforeTransitionStart resize",()=>{this.paginationIndex.innerText=this.getPaginationIndex(e)})}init(){this.paginationBullet&&this.setPaginationBullet(),this.navigation.prev&&this.navigation.next&&this.setNavigation(),this.slider=new p(this.element,this.parametersSwiper),this.paginationIndex&&this.paginationBullet&&this.setPaginationIndex(this.slider)}}class q{constructor(e){this.container=e,this.preview=this.container.querySelector(".js-event-preview"),this.items=this.container.querySelectorAll(".js-event-item"),this.init()}getCoord(e){return{y:e.pageY-this.container.offsetTop-this.preview.offsetWidth}}setEventCoordPreview(){this.container.addEventListener("mousemove",e=>{this.preview.style.opacity=1,this.preview.style.top=`${this.getCoord(e).y}px`,this.preview.style.left=`${this.getCoord(e).x}px`}),this.container.addEventListener("mouseleave",()=>{this.preview.style.opacity=0})}setEventChangeImage(){this.items.forEach(e=>{e.addEventListener("mouseenter",()=>{let t=e.querySelector(".js-event-item-image").getAttribute("src");this.preview.querySelector(".js-event-preview-img").setAttribute("src",t)})})}init(){this.container&&this.preview&&(this.container.style.position="relative",this.container.style.zIndex=3,this.setEventCoordPreview()),this.preview&&(this.preview.insertAdjacentHTML("afterbegin",'<img src="#" class="js-event-preview-img object-fit-cover">'),this.preview.image=this.preview.querySelector(".js-event-preview-img"),this.setEventChangeImage())}}class P{constructor(e){this.element=e,this.text=this.element.innerText,this.lengthDesktop=this.element.getAttribute("data-length"),this.lengthMobile=this.element.getAttribute("data-length-mobile"),this.init()}getLengthText(e,t){return{mobile:this.text.length>=t?`${this.text.substring(0,t)}...`:!1,desktop:this.text.length>=e?`${this.text.substring(0,e)}...`:!1}}setNewText(){const e=this.getLengthText(this.lengthDesktop,this.lengthMobile);window.innerWidth>580&&e.desktop?this.element.innerText=e.desktop:e.mobile&&(this.element.innerText=e.mobile)}init(){this.setNewText(),window.addEventListener("resize",()=>{this.setNewText()})}}function u(n,e){n.setAttribute("src",e)}class I{constructor(e){this.section=e,this.mainSliderElements={slider:e.querySelector(".js-products-slider-main"),paginations:e.querySelectorAll(".js-products-slider-main-tabs-pagination")},this.innerSlidersElements=e.querySelectorAll(".js-products-slider-inner"),this.mainSlider={},this.innerSlider={},this.defaultParameterSwiper={slidesPerView:1,slideActiveClass:"is-active"},this.init()}setTabsPagination(e,t,i=!1){const r=t.querySelectorAll(".js-products-slider-tabs-pagination-button");function a(s){t.querySelector(".is-active").classList.remove("is-active"),r[s].classList.add("is-active")}if(r.forEach((s,o)=>{o===0&&i&&s.classList.add("is-active"),s.addEventListener("click",l=>{l.preventDefault(),e.activeIndex!==o&&e.slideTo(o)})}),i)return a}setIndexPagination(e,t){const i=e.snapIndex+1,r=e.pagination.bullets.length;t.innerText=`${(i<10?"0":"")+i} / ${(e.pagination.bullets.length<10?"0":"")+r}`}initMainSlider(){this.mainSlider=new p(this.mainSliderElements.slider,{...this.defaultParameterSwiper,direction:"vertical",speed:500,allowTouchMove:!1,autoHeight:!0}),this.mainSliderElements.paginations.length&&this.mainSliderElements.paginations.forEach(e=>{this.setTabsPagination(this.mainSlider,e)})}initInnerSlider(e,t){const i=e.closest(".swiper-slide"),r=i.querySelector(".js-products-slider-inner-tabs-pagination"),a=i.querySelector(".js-slider-default-pagination-index"),s=i.querySelector(".js-slider-default-pagination-bullet"),o={prev:i.querySelector(".js-slider-default-navigation-prev"),next:i.querySelector(".js-slider-default-navigation-next")},l={...this.defaultParameterSwiper,slidesPerView:"auto",modules:[w,x]};s&&(l.pagination={el:s,bulletClass:"slider-pagination__bullet-item",bulletActiveClass:"slider-pagination__bullet-item_active"}),o.prev&&o.next&&(l.navigation={prevEl:o.prev,nextEl:o.next}),this.innerSlider[t]=new p(e,l),a&&s&&this.setIndexPagination(this.innerSlider[t],a);const b=this.setTabsPagination(this.innerSlider[t],r,!0);this.innerSlider[t].on("transitionStart",c=>{if(r&&b(c.activeIndex),a&&s&&this.setIndexPagination(c,a),window.innerWidth>1120){const m=c.el.closest(".js-products-slider-main-slide").querySelector(".js-scheme"),j=c.slides[c.snapIndex].querySelector(".js-item-product").getAttribute("data-scheme");m&&u(m,j)}})}init(){this.mainSliderElements.slider&&this.initMainSlider(),this.innerSlidersElements.length&&this.innerSlidersElements.forEach((e,t)=>{this.initInnerSlider(e,t)})}}const d=document.querySelector(".js-modal-menu"),g=document.querySelector(".js-button-burger"),v=document.querySelector(".js-part-header");d&&(new y(d,{backdrop:!1}),d.addEventListener("show.bs.modal",()=>{window.scrollTo(0,0),v.style.zIndex=1e3,g.classList.add("is-active")}),d.addEventListener("hide.bs.modal",()=>{v.style.zIndex="auto",g.classList.remove("is-active")}));const f=document.querySelectorAll(".js-form-field");f.length&&f.forEach(n=>{const e=n.querySelector(".js-form-field-clear"),t=n.querySelector(".js-form-field-input");e&&e.addEventListener("click",()=>{t.value="",n.classList.contains("is-error")&&n.classList.remove("is-error")})});const S=document.querySelectorAll(".js-item-product");if(S.length){const n=new y("#modal-product");S.forEach(e=>{let t=e.getAttribute("data-event").split(","),i={event:{hover:t.includes("hover"),click:t.includes("click")},title:e.getAttribute("data-title"),floor:e.getAttribute("data-floor"),scheme:e.getAttribute("data-scheme")};i.event.hover&&e.addEventListener("mouseenter",()=>{if(window.innerWidth>580){console.log(1);let r=document.querySelector(".js-scheme-main");r&&u(r,i.scheme)}}),i.event.click&&e.addEventListener("click",r=>{window.innerWidth<580&&(r.preventDefault(),n._element.querySelector(".js-modal-product-title").innerText=i.title,n._element.querySelector(".js-modal-product-floor").innerText=i.floor,u(n._element.querySelector(".js-scheme"),i.scheme),n.show())})})}const h=document.querySelector(".js-fixed-element-section");if(h){const n=h.querySelector(".js-fixed-element");window.addEventListener("scroll",e=>{let t=h.getBoundingClientRect().top;t-window.innerHeight+h.offsetHeight<0||t>0?n.style.opacity=0:n.style.opacity=1})}window.addEventListener("DOMContentLoaded",()=>{const n=document.querySelectorAll(".js-slider-default");n.length&&n.forEach(s=>{new E(s)});const e=document.querySelector(".js-event-container");e&&window.innerWidth>1120&&new q(e);const t=document.querySelector(".js-products-slider");t&&new I(t);const i=document.querySelectorAll(".js-set-length-text");i.length&&i.forEach(s=>{new P(s)});const r=document.querySelectorAll(".js-filter-item"),a=document.querySelector(".js-scheme-filter");r.length&&r.forEach(s=>{s.addEventListener("click",()=>u(a,s.getAttribute("data-scheme")))})});
